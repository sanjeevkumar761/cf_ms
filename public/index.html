<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
  </head>
  <body>
    <h1 class="text-center">Cash Flows</h1>
    <!--<h3 class="text-center">It Works!</h3>-->
    <!--<div data-role="cube"></div>-->
    
	<div id="becf_div">
		<table class="table" id="becf_table">
		</table>		
	</div>

    <!--<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdn.metroui.org.ua/v4/js/metro.min.js"></script>
    
    <script>
		$(document).ready(function(){
			//Making AJAX call to retrieve cash flow data from REST API	
			$.ajax({
			   type: 'GET',
			    url: "https://scelero.serveo.net/read",
			    success: function(json) {
			    	console.log("Got the data");
			    	console.log(json.result.length); // Prints total no. of records on browser console
			    	
			    	//Iterate through the data records
			    	for(var i=0; i<json.result.length;i++){
			    		//Build table header row
			    		if(i == 0){
							$("#becf_table").append(
								"<thead>" + 
									"<tr>" + 
										"<th>" + json.result[i][0] + "</th>" + 
										"<th>" + json.result[i][1] + "</th>" +
										"<th>" + json.result[i][2] + "</th>" +
										"<th>" + json.result[i][3] + "</th>" +
										"<th>" + json.result[i][4] + "</th>" +
										"<th>" + json.result[i][5] + "</th>" +
										"<th>" + json.result[i][6] + "</th>" +
										"<th>" + json.result[i][7] + "</th>" +
										"<th>" + json.result[i][8] + "</th>" +
										"<th>" + json.result[i][9] + "</th>" +
										"<th>" + json.result[i][10] + "</th>" +
									"</tr></thead>"
							)			    			
			    		}else {
			    			//Build table data rows
			    			var tableBody = "";
			    			tableBody = tableBody + "<tbody>";
			    					tableBody = tableBody + "<tr>";
			    					//Printing first 10 columns only, of each row
					    			for(var j=0; j <=10; j++ ){
					    					tableBody = tableBody + "<td>" + json.result[i][j] + "</td>";
					    			}
			    					tableBody = tableBody + "</tr>";
			    			tableBody = tableBody + "</tbody>";
			    			$("#becf_table").append(tableBody);
			    		}
			    	}

			    },
			    error: function(e) {
			    	//Handle the error here
			       console.log(e);
			    }
			});

	  
		});
    </script>
  </body>
</html>
